{"ast":null,"code":"import _toConsumableArray from\"/Users/monarch/Documents/MERN/ProShop/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{Link,useParams,useLocation,useNavigate,useSearchParams}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{Row,Col,ListGroup,Image,Form,Button,Card,ListGroupItem}from\"react-bootstrap\";import Message from\"../components/Message\";//import action\nimport{addToCart,removeToCart}from\"../actions/cartAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(){var location=useLocation();var _useParams=useParams(),id=_useParams.id;console.log(id);var qty=location.search?Number(location.search.split('=')[1]):1;var dispatch=useDispatch();var navigate=useNavigate();// const [searchParams] = useSearchParams();\n// const redirect = searchParams.get(\"redirect\");\n// const redirect = location.search ? location.search.split('=')[1] : '/'\nvar cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;console.log(cartItems);useEffect(function(){if(id){dispatch(addToCart(id,qty));}},[dispatch,id,qty]);console.log(qty);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeToCart(id));console.log('remove');};var checkoutHandler=function checkoutHandler(){// navigate(`/${redirect}`);\n// navigate(\"/login?redirect=shipping\")\nnavigate('/shipping');console.log(\"check\");};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{children:[\"Your Cart is Empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroupItem,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas sa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{children:[/*#__PURE__*/_jsxs(ListGroupItem,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroupItem,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed to checkout\"})})]})})})]});}export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useParams","useLocation","useNavigate","useSearchParams","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","ListGroupItem","Message","addToCart","removeToCart","CartScreen","location","id","console","log","qty","search","Number","split","dispatch","navigate","cart","state","cartItems","removeFromCartHandler","checkoutHandler","length","map","item","image","name","product","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed"],"sources":["/Users/monarch/Documents/MERN/ProShop/frontend/src/screens/CartScreen.jsx"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { Link, useParams, useLocation, useNavigate,useSearchParams } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Row,Col,ListGroup,Image,Form,Button,Card, ListGroupItem} from \"react-bootstrap\"\nimport Message from \"../components/Message\"\n//import action\n import { addToCart, removeToCart } from \"../actions/cartAction\"\n\nfunction CartScreen() {\n    const location = useLocation()\n    let { id } = useParams();\n    console.log( id ) \n    const qty = location.search ? Number(location.search.split('=')[1]) : 1\n\n    const dispatch = useDispatch()\n    const navigate = useNavigate()\n    // const [searchParams] = useSearchParams();\n\n    // const redirect = searchParams.get(\"redirect\");\n    // const redirect = location.search ? location.search.split('=')[1] : '/'\n\n    const cart = useSelector(state => state.cart)\n    const { cartItems } = cart\n\n    console.log(cartItems)\n    useEffect(()=>{\n        if(id){\n            dispatch(addToCart(id,qty))\n        }\n    },[dispatch,id,qty])\n\n    console.log(qty)\n\n    const removeFromCartHandler = (id) => {\n        dispatch(removeToCart(id))\n        console.log('remove')\n    }\n\n    const checkoutHandler = () => {\n        // navigate(`/${redirect}`);\n        // navigate(\"/login?redirect=shipping\")\n        navigate('/shipping')\n        console.log(\"check\")\n    }\n  return (\n    <Row>\n        <Col md={8}>\n            <h1>Shopping Cart</h1>\n            {cartItems.length === 0 ? \n            (\n            <Message>Your Cart is Empty <Link to=\"/\">Go back</Link></Message>\n            ) :\n            (\n                <ListGroup variant=\"flush\">\n                    {\n                        cartItems.map(item => (\n                            <ListGroupItem key={item.product}>\n                                <Row>\n                                    <Col md={2}>\n                                        <Image src={item.image} alt={item.name} fluid rounded />\n                                    </Col>\n                                    <Col md={3}>\n                                        <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                    </Col>\n                                    <Col md={2}>${item.price}</Col>\n                                    <Col md={2}>\n                                        <Form.Control as=\"select\" value={item.qty} onChange={(e)=>dispatch(addToCart(item.product,Number(e.target.value)))}>\n                                            {[...Array(item.countInStock).keys()].map(x => (\n                                                <option key={x+1} value={x+1}>\n                                                    {x+1}\n                                                </option>\n                                            ))}\n                                        </Form.Control>\n                                    </Col>\n                                    <Col md={2}>\n                                        <Button type=\"button\" variant=\"light\" onClick={()=>removeFromCartHandler(item.product)}>\n                                            <i className='fas sa-trash'></i>\n                                        </Button>\n                                    </Col>\n                                </Row>\n                            </ListGroupItem>\n                        ))\n                    }\n                </ListGroup>\n            )}\n        </Col>\n        <Col md={4}>\n            <Card>\n                <ListGroup>\n                    <ListGroupItem>\n                        <h2>Subtotal ({cartItems.reduce((acc,item)=>acc + item.qty,0)}) items</h2>\n                        ${cartItems.reduce((acc,item)=>acc + (item.qty * item.price),0).toFixed(2)}\n                    </ListGroupItem>\n                    <ListGroupItem>\n                        <Button type=\"button\" className='btn-block' disabled = {cartItems.length === 0}\n                        onClick={checkoutHandler}>Proceed to checkout</Button>\n                    </ListGroupItem>\n                </ListGroup>\n            </Card>\n        </Col>\n    </Row>\n  )\n}\n\nexport default CartScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}