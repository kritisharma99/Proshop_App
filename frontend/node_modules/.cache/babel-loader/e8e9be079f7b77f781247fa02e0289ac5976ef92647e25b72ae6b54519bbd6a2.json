{"ast":null,"code":"import React,{useState,useEffect}from'react';import{LinkContainer}from\"react-router-bootstrap\";import{Table,Button}from\"react-bootstrap\";import{useLocation,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from\"react-redux\";import Message from\"../components/Message\";import Loader from\"../components/Loader\";import{listUsers,deleteUser}from\"../actions/userAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserListScreen(){var dispatch=useDispatch();var navigate=useNavigate();var userList=useSelector(function(state){return state.usersList;});var loading=userList.loading,error=userList.error,users=userList.users;console.log(loading,error,users);var userDelete=useSelector(function(state){return state.user;});var successDelete=userDelete.success;var userLogin=useSelector(function(state){return state.userDelete;});var userinfo=userLogin.userinfo;console.log(userLogin);useEffect(function(){if(userinfo&&userinfo.isAdmin){dispatch(listUsers());}else{navigate('/signIn');}},[dispatch,successDelete]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure?')){dispatch(userDelete(id));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Users\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EMAIL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ADMIN\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(user.email),children:user.email})}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/user/\".concat(user._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(user._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},user._id);})})]})]});}export default UserListScreen;","map":{"version":3,"names":["React","useState","useEffect","LinkContainer","Table","Button","useLocation","useNavigate","useDispatch","useSelector","Message","Loader","listUsers","deleteUser","UserListScreen","dispatch","navigate","userList","state","usersList","loading","error","users","console","log","userDelete","user","successDelete","success","userLogin","userinfo","isAdmin","deleteHandler","id","window","confirm","map","_id","name","email","color"],"sources":["/Users/monarch/Documents/MERN/ProShop/frontend/src/screens/UserLIstScreen.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { LinkContainer } from \"react-router-bootstrap\"\nimport { Table, Button } from \"react-bootstrap\"\nimport { useLocation, useNavigate } from 'react-router-dom'\nimport { useDispatch, useSelector} from  \"react-redux\"\nimport Message from \"../components/Message\"\nimport Loader from \"../components/Loader\"\nimport { listUsers, deleteUser } from \"../actions/userAction\"\n\nfunction UserListScreen() {\n    const dispatch = useDispatch()\n    const navigate = useNavigate()\n\n    const userList = useSelector(state => state.usersList)\n    const { loading,error, users} = userList\n    console.log(loading, error, users)\n\n    const userDelete = useSelector(state => state.user)\n    const { success: successDelete } = userDelete\n\n    const userLogin = useSelector(state => state.userDelete)\n    const { userinfo } = userLogin\n\n    console.log(userLogin)\n\n    useEffect(()=>{\n        if (userinfo && userinfo.isAdmin) {\n            dispatch(listUsers())\n          } else {\n            navigate('/signIn')\n          }\n    },[dispatch, successDelete])\n\n    const deleteHandler = (id) => {\n        if(window.confirm('Are you sure?')){\n            dispatch(userDelete(id))\n        }\n    }\n  return (\n    <div>\n      <h1>Users</h1>\n      {loading ? <Loader/> : error ? <Message variant=\"danger\">{error}</Message> :(\n          <Table striped bordered hover responsive className='table-sm'>\n            <thead>\n                <tr>\n                    <th>ID</th>\n                    <th>NAME</th>\n                    <th>EMAIL</th>\n                    <th>ADMIN</th>\n                </tr>\n            </thead>\n            <tbody>\n                {\n                    users.map(user => (\n                        <tr key={user._id}>\n                            <td>{user._id}</td>\n                            <td>{user.name}</td>\n                            <td><a href={`mailto:${user.email}`}>{user.email}</a></td>\n                            <td>\n                                {user.isAdmin ? (\n                                        <i className='fas fa-check' style={{ color: 'green' }}></i>\n                                    ) : (\n                                        <i className='fas fa-times' style={{ color: 'red' }}></i>\n                                    )}\n                            </td>\n                            <td>\n                                <LinkContainer to={`/admin/user/${user._id}/edit`}>\n                                    <Button variant='light' className='btn-sm'>\n                                    <i className='fas fa-edit'></i>\n                                    </Button>\n                                </LinkContainer>\n                                <Button\n                                    variant='danger'\n                                    className='btn-sm'\n                                    onClick={() => deleteHandler(user._id)}>\n                                    <i className='fas fa-trash'></i>\n                                </Button>\n                            </td>\n                        </tr>\n                    ))\n                }\n            </tbody>\n          </Table>\n      )}\n    </div>\n  )\n}\n\nexport default UserListScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}